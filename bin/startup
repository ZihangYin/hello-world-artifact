#!/bin/sh

# Run "sh startup target/HelloWorldArtifact-0.0.1-SNAPSHOT.jar" to start web service
# Run "kill `cat server.pid`" to stop web service

# If a specific java binary isn't specified search for the standard 'java' binary
if [ -n "$JAVA_HOME"  ] ; then
  if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
    # IBM's JDK on AIX uses strange locations for the executables
    JAVACMD="$JAVA_HOME/jre/sh/java"
  else
    JAVACMD="$JAVA_HOME/bin/java"
  fi
else
  JAVACMD=`which java`
fi

if [ ! -x "$JAVACMD" ] ; then
  echo "Error: JAVA_HOME is not defined correctly." 1>&2
  echo "  We cannot execute $JAVACMD" 1>&2
  exit 1
fi

if [ -z "$1" ] ; then
  echo "Error: Application jar file is not defined correctly." 1>&2
  exit 1
fi

exec nohup "$JAVACMD" $JAVA_OPTS -Xms512m -Xmx2048m -jar "$1"  >processmanager.out 2>&1 &
echo $! > server.pid
